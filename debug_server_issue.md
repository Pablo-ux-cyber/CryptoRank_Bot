# ДИАГНОСТИКА ПРОБЛЕМЫ С SYSTEMD

## Анализ проблемы

**Факты:**
1. API ключ добавлен в .env файл ✅
2. SystemD сервис перезапущен ✅  
3. Система все еще показывает "API ключ: НЕ НАЙДЕН" ❌
4. Загружается только 13/50 монет ❌

**Вывод:** SystemD сервис не загружает .env файл

## Причины

1. **Отсутствует EnvironmentFile** в systemd сервисе
2. **Неправильный путь** к .env файлу
3. **Права доступа** к .env файлу

## Диагностические команды

```bash
# 1. Проверить содержимое .env
cat /root/coinbaserank_bot/.env | grep CRYPTOCOMPARE

# 2. Проверить права доступа к .env
ls -la /root/coinbaserank_bot/.env

# 3. Проверить конфигурацию systemd
sudo systemctl cat coinbasebot

# 4. Проверить переменные окружения процесса
sudo systemctl show coinbasebot --property=Environment

# 5. Проверить статус сервиса
sudo systemctl status coinbasebot
```

## Ожидаемые результаты

После исправления должно быть:
- **API ключ найден:** "API ключ: 14fdb7e37c..."
- **Монеты загружены:** 48-49/50 успешно
- **Результат стабильный:** ~40.8% как на Replit
- **Нет ошибок лимитов:** отсутствуют "rate limit exceeded"

## Сравнение с Replit

**Replit (работает):**
- API ключ: найден ✅
- Монеты: 49/50 ✅  
- Market Breadth: 40.8% ✅

**Сервер (не работает):**
- API ключ: НЕ НАЙДЕН ❌
- Монеты: 13/50 ❌
- Market Breadth: нестабильный ❌

**Разница:** конфигурация загрузки переменных окружения