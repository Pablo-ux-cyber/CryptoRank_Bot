#!/bin/bash

# Простой скрипт для синхронизации изменений с GitHub без лишних операций
# Использует git stash для временного сохранения локальных изменений

echo "=== Простая синхронизация с GitHub ==="
echo "Дата: $(date)"
echo ""

# Проверка, что мы находимся в нужной директории
if [ ! -d ".git" ]; then
    echo "Ошибка: скрипт должен быть запущен из корневой директории репозитория!"
    exit 1
fi

# Получение текущего состояния
echo "Состояние репозитория:"
git status -s
echo ""

# Создание stash для временного сохранения изменений
echo "Сохранение локальных изменений..."
git stash -u

# Получение последней версии с GitHub
echo "Получение последних изменений с GitHub..."
git pull

# Применение сохраненных изменений
echo "Восстановление локальных изменений..."
git stash pop

echo ""
echo "=== Синхронизация завершена ==="
echo "Текущие изменения:"
git status -s